# MarkNotes QA & Test Guide

> 작성일: 2026-02-19
>
> 버전: v1.9.7+
>
> 목적: 자동화 테스트 현황 및 수동 검증 체크리스트

---

## 목차

1. [테스트 전략 개요](#1-테스트-전략-개요)
2. [자동화 테스트 현황](#2-자동화-테스트-현황)
   - 2.1 실행 방법
   - 2.2 테스트 구성
   - 2.3 테스트 파일별 상세 내용
   - 2.4 커버리지 현황
3. [수동 테스트 체크리스트](#3-수동-테스트-체크리스트)
   - 3.1 파일 트리 & 파일 작업
   - 3.2 편집기 — WYSIWYG 기능
   - 3.3 편집기 — 마크다운 렌더링
   - 3.4 메뉴 & 단축키
   - 3.5 검색 기능
   - 3.6 메타데이터 패널
   - 3.7 PDF 내보내기
   - 3.8 이미지 관리
   - 3.9 UI/UX & 외관

---

## 1. 테스트 전략 개요

### 테스트 레이어 구분

| 레이어 | 도구 | 자동화 여부 | 대상 |
|--------|------|------------|------|
| Unit | Vitest | ✅ 구현 완료 | 유틸리티, 서비스 로직, Store, 변환기 |
| E2E | Playwright + Electron | 미구현 (장기 계획) | 앱 구동, 파일 열기, 기본 편집 |
| Manual | 수동 체크리스트 | 사람이 직접 확인 | 렌더링 품질, 복잡한 UI 상호작용 |

### 수동 테스트가 필요한 이유

아래 항목들은 로직 자동화 테스트로는 검증할 수 없으며, 실제 Electron 앱을 실행하여 사람이 직접 확인해야 합니다:

- **시각적 렌더링 품질** — 마크다운 표시, PDF 출력 결과
- **드래그 앤 드롭** — 파일/폴더 이동 상호작용
- **macOS 네이티브 다이얼로그** — 파일 선택, PDF 저장
- **IME 입력** — 한국어 등 조합 문자 입력 중 중복 없는지 확인
- **외부 파일 감시** — 앱 외부에서 파일 변경 시 동기화
- **자동 저장 타이밍** — 실제 5초 디바운스 동작 확인

---

## 2. 자동화 테스트 현황

### 2.1 실행 방법

프로젝트 루트에서 아래 명령어로 테스트를 실행합니다.

| 명령어 | 설명 |
|--------|------|
| `npm test` | 전체 테스트 1회 실행 |
| `npm run test:watch` | 파일 변경 감지 모드로 실행 |
| `npm run test:coverage` | 커버리지 리포트 포함 실행 |
| `npm run test:main` | Main 프로세스 테스트만 실행 |
| `npm run test:renderer` | Renderer 프로세스 테스트만 실행 |

셸 스크립트로도 실행할 수 있습니다:

| 명령어 | 설명 |
|--------|------|
| `./scripts/run-tests.sh` | 전체 실행 |
| `./scripts/run-tests.sh --coverage` | 커버리지 포함 |
| `./scripts/run-tests.sh --main` | Main만 |
| `./scripts/run-tests.sh --renderer` | Renderer만 |
| `./scripts/run-tests.sh --watch` | Watch 모드 |

### 2.2 테스트 구성

테스트는 Main 프로세스(Node.js)와 Renderer 프로세스(jsdom)로 환경이 분리되어 있습니다.

```
tests/
├── setup/
│   ├── setup.main.ts          ← Main 테스트 공통 설정
│   └── setup.renderer.ts      ← Renderer 테스트 공통 설정 (localStorage, window.api 등 mock)
└── unit/
    ├── main/                  ← Node.js 환경 (67개 테스트)
    │   ├── utils.test.ts
    │   ├── fileOperations.test.ts
    │   └── searchService.test.ts
    └── renderer/              ← jsdom 환경 (137개 테스트)
        ├── frontmatter.test.ts
        ├── htmlToMarkdown.test.ts
        ├── markdownToHtml.test.ts
        └── store.test.ts
```

**현재 총 204개 테스트, 전체 통과**

### 2.3 테스트 파일별 상세 내용

---

#### utils.test.ts — 9개 테스트

대상: `src/main/utils.ts`의 경로 보안 검증 함수 `validatePath()`

검증 항목:

- ROOT_PATH 자신 및 하위 경로는 허용
- ROOT_PATH 외부 경로는 거부
- 상위 디렉토리 이동 (`../`) 시도 거부 (Path Traversal 방지)
- 빈 문자열 거부
- **Prefix Attack 방지** — `MarkNotesEvil/` 처럼 ROOT_PATH와 비슷하게 시작하는 경로도 거부

> 이 테스트 작성 중 `validatePath()`에 Prefix Attack 취약점이 발견되어
> `src/main/utils.ts` 소스 코드가 수정되었습니다.

---

#### fileOperations.test.ts — 37개 테스트

대상: `src/main/services/fileOperations.ts`의 파일 CRUD 로직

`fs/promises`를 mock으로 대체하여 실제 파일시스템 접근 없이 로직만 검증합니다.

| 기능 | 테스트 수 | 주요 검증 내용 |
|------|-----------|---------------|
| readFile | 4개 | 정상 읽기, 없는 파일 오류, 외부 경로 차단, 인코딩 |
| writeFile | 4개 | 정상 쓰기, 외부 경로 차단, 디렉토리 자동 생성, 쓰기 오류 |
| createFile | 4개 | 신규 생성, 중복 파일명 방지, 외부 경로 차단, `.md` 확장자 자동 추가 |
| createFolder | 3개 | 정상 생성, 중복 방지, 외부 경로 차단 |
| deleteFile | 4개 | 파일 삭제, 폴더 삭제, 외부 경로 차단, 없는 파일 오류 |
| renameFile | 4개 | 정상 이름 변경, 외부 경로 차단, 없는 파일 오류, `.md` 확장자 강제 |
| moveFile | 4개 | 정상 이동, 외부 경로 차단, 없는 파일 오류, 같은 위치 이동 방지 |
| duplicateFile | 4개 | 복사본 생성, 이름 충돌 시 번호 자동 추가 (`_copy_2`), 외부 경로 차단 |
| fileExists | 3개 | 존재/비존재 확인, 외부 경로 차단 |
| buildFileTree | 3개 | 파일 목록 구성, 폴더 우선 정렬, 숨김 파일(`.` 시작) 제외 |

---

#### searchService.test.ts — 21개 테스트

대상: `src/main/services/searchService.ts`의 전역 검색 로직

실제 파일시스템 대신 인메모리 파일 목록을 사용하여 검색 로직을 독립적으로 검증합니다.

| 기능 | 테스트 수 | 주요 검증 내용 |
|------|-----------|---------------|
| searchFiles (Notes 모드) | 11개 | 키워드 매칭, 대소문자 구분/무시, 최대 50개 결과 제한, frontmatter 본문 분리(라인 번호 계산), 빈 쿼리 처리, 매칭 라인 번호 포함, 빈 폴더 처리 |
| searchTags (Tags 모드) | 10개 | YAML 블록형 태그(`- tag`), 인라인 배열 태그(`[a, b]`), 부분 일치, 대소문자 구분, 태그 없는 파일 제외 |

---

#### frontmatter.test.ts — 32개 테스트 (커버리지 100%)

대상: `src/renderer/src/utils/frontmatter.ts`의 YAML 프론트매터 처리

순수 함수들이므로 mock 없이 직접 테스트합니다.

| 함수 | 테스트 수 | 주요 검증 내용 |
|------|-----------|---------------|
| `parseFrontmatter` | 6개 | frontmatter 없는 경우 빈 객체 반환, 정상 파싱, 배열/인라인 태그, 잘못된 YAML 안전 처리 |
| `extractBody` | 2개 | frontmatter 제거 후 본문만 반환, frontmatter 없으면 원본 반환 |
| `buildContent` | 4개 | data 없으면 body만, YAML 생성, 필드 순서 보장(id→title→created→updated→source→tags→status), 사용자 정의 필드는 순서 뒤에 |
| `updateTags` | 4개 | 태그 업데이트, 빈 배열이면 태그 필드 제거, 본문 보존, frontmatter 없는 파일에도 추가 |
| `updateField` | 3개 | 기존 필드 수정, 새 필드 추가, 본문 보존 |
| `removeField` | 3개 | 필드 제거, 없는 필드 안전 처리, 다른 필드 유지 |
| `ensureDefaults` | 5개 | 기본 필드 자동 추가, 기존 필드 덮어쓰지 않음, 파일명에서 title 생성, id 날짜 형식 검증 |
| `stampUpdated` | 3개 | updated 오늘 날짜로 업데이트, 이미 오늘이면 변경 없음, frontmatter 없으면 원본 반환 |
| 상수 | 2개 | `AUTO_FIELDS` 및 `STATUS_OPTIONS` 값 확인 |

---

#### htmlToMarkdown.test.ts — 31개 테스트 (커버리지 98%)

대상: `src/renderer/src/components/Editor/markdown/htmlToMarkdown.ts`
Turndown 라이브러리를 사용한 HTML → Markdown 변환

| 변환 유형 | 테스트 수 | 주요 검증 내용 |
|-----------|-----------|---------------|
| 제목 | 6개 | H1~H6 → `#`~`######` |
| 인라인 서식 | 7개 | `<strong>` → `**`, `<em>` → `*`, `<del>/<s>/<strike>` → `~~`, `<code>` → 백틱, `<a>` → `[text](url)`, 앵커 링크 |
| 코드 블록 | 3개 | `<pre><code>` → 펜스 코드 블록, 언어 클래스 보존, 끝부분 불필요한 개행 제거 |
| 목록 | 4개 | `<ul>` → `- `, `<ol>` → `1.`, 미완료 체크박스 → `- [ ]`, 완료 → `- [x]` |
| 인용구 | 1개 | `<blockquote>` → `>` |
| GFM 표 | 3개 | `<table>` → 파이프 표, 구분자 행 확인, `\|` 이스케이프 |
| 이미지 | 5개 | `<img>` → `![alt](src)`, original 크기는 주석 없음, small/medium/large 크기 주석 추가, `data-asset-path` 우선 사용, alt 없는 이미지 처리 |

---

#### markdownToHtml.test.ts — 39개 테스트

대상: `src/renderer/src/components/Editor/markdown/markdownToHtml.ts`
`marked` 라이브러리를 사용한 Markdown → HTML 변환 및 왕복 변환

| 테스트 그룹 | 테스트 수 | 주요 검증 내용 |
|-------------|-----------|---------------|
| 기본 블록 요소 | 6개 | H1~H6, `<p>`, `<blockquote>`, `<hr>` |
| 인라인 서식 | 5개 | `**` → `<strong>`, `*` → `<em>`, `~~` → `<del>`, 백틱 → `<code>`, 링크 |
| 목록 | 6개 | `<ul>`, `<ol>`, 체크박스 `data-checked="false"`, `data-checked="true"`, 대문자 `[X]` 처리, `marked` 단독 결과 확인 |
| 코드 블록 | 3개 | `<pre><code>`, 언어 클래스, HTML 엔티티 이스케이프 |
| GFM 표 | 4개 | `<table>`, `<th>`, `<td>`, 정렬 스타일 속성 |
| 제목 ID 자동 생성 | 3개 | `id="hello-world"` 형식, 공백→하이픈, 특수문자 제거 |
| 이미지 | 2개 | `image-wrapper` div 감싸기, `data-size="original"` 기본값 |
| postProcessImageSizes | 4개 | `<!-- size:small/medium/large -->` 주석 → CSS 클래스 변환, 주석 없으면 변경 없음 |
| **왕복 변환 (Roundtrip)** | 6개 | MD → HTML → MD 전체 파이프라인: 제목, 굵게+기울임, 목록, 체크박스, 코드 블록, GFM 표 |

---

#### store.test.ts — 35개 테스트 (커버리지 97%)

대상: `src/renderer/src/store/useDocumentStore.ts`
Zustand 상태 관리 (React 없이 store를 직접 조작하여 테스트)

| 상태 그룹 | 테스트 수 | 주요 검증 내용 |
|-----------|-----------|---------------|
| 초기 상태 | 3개 | content 빈 문자열, saveStatus "saved", mode "wysiwyg" |
| setContent / saveStatus | 4개 | 내용 변경 시 "unsaved", 저장 후 "saved", 동일 내용 유지 시 상태 유지 |
| hasUnsavedChanges | 3개 | 초기 false, 변경 후 true, 저장 후 false |
| setCurrentFile | 4개 | 파일 경로/이름 설정, null로 초기화, 내용과 함께 설정 |
| toggleSidebar | 2개 | 사이드바 토글 |
| mode | 3개 | wysiwyg / split / preview 전환 |
| find/replace | 6개 | 검색 표시/숨김, 쿼리 업데이트, replace 패널, 대소문자 구분 |
| globalSearch | 4개 | 전역 검색 표시/숨김, 쿼리 설정 |
| updateCounts | 4개 | 단어/글자 수, 현재 줄/전체 줄 수 |
| pendingGlobalJump | 2개 | 전역 검색 결과 파일·라인 점프 처리 |

---

### 2.4 커버리지 현황

`npm run test:coverage` 실행 결과 (v1.9.7 기준):

| 파일 | 구문 커버리지 | 특이사항 |
|------|-------------|----------|
| `frontmatter.ts` | **100%** | 완벽 |
| `htmlToMarkdown.ts` | **98%** | 우수 |
| `searchService.ts` | 90% | 양호 |
| `useDocumentStore.ts` | 97% | 양호 |
| `fileOperations.ts` | 82% | 양호 |
| `markdownToHtml.ts` | 72% | `resolveAssetImages()` 미테스트 (비동기 IPC 의존) |
| `taskListProcessor.ts` | 36% | `processTaskListsForPreview()` 미테스트 (TipTap 노드 구조 의존) |
| `utils.ts` | 35% | `ensureRootDirectory()` 미테스트 (실제 파일시스템 접근) |
| **전체 평균** | **86%** | |

커버리지가 낮은 함수들은 실제 파일시스템, TipTap 내부 구조, 또는 Electron IPC에 의존하므로 단순 단위 테스트로는 검증이 어렵습니다. 해당 기능은 수동 테스트로 보완합니다.

---

## 3. 수동 테스트 체크리스트

> Electron 앱(`npm run dev`)을 직접 실행한 상태에서 확인합니다.
> 항목을 클릭하여 체크하거나, PASS / FAIL을 항목 뒤에 메모하세요.

---

### 3.1 파일 트리 & 파일 작업

#### 파일 생성

- [ ] **F01** `Cmd+N` → 파일명 입력 → Create : 파일 생성 후 편집기 자동 열림
- [ ] **F02** `Cmd+N` → 파일명에 `.md` 없이 입력 : 자동으로 `.md` 추가됨
- [ ] **F03** `Cmd+N` → 특수문자가 포함된 파일명 : 적절한 처리 또는 에러 표시
- [ ] **F04** `Cmd+N` → 이미 존재하는 파일명 : 에러 메시지 표시, 파일 생성 안 됨
- [ ] **F05** 파일명 없이 Create 버튼 클릭 : Create 버튼이 비활성화 상태
- [ ] **F06** Create Modal에서 `Escape` : 모달 닫힘, 생성 취소

#### 폴더 생성

- [ ] **F07** `Cmd+Shift+N` → 폴더명 입력 → Create : 폴더 생성 후 파일 트리에 표시
- [ ] **F08** Create Modal에서 중첩 폴더 선택 후 파일 생성 : 선택한 폴더 내에 파일 생성됨

#### 파일 열기

- [ ] **F09** 파일 트리에서 파일 클릭 : 편집기에 파일 내용 로드
- [ ] **F10** 저장 안 된 상태에서 다른 파일 클릭 : 자동 저장 후 새 파일 열림
- [ ] **F11** 폴더 클릭 : 폴더 열기/닫기 토글

#### 파일 우클릭 컨텍스트 메뉴

- [ ] **F12** 파일 우클릭 → Open : 편집기에 파일 열림
- [ ] **F13** 파일 우클릭 → Rename → 새 이름 입력 → `Enter` : 파일명 변경됨
- [ ] **F14** 파일 우클릭 → Rename → `Escape` : 이름 변경 취소
- [ ] **F15** 파일 우클릭 → Duplicate : `_copy.md` 파일 생성됨
- [ ] **F16** `_copy.md` 이미 존재할 때 Duplicate : `_copy_2.md` 생성됨
- [ ] **F17** 파일 우클릭 → Delete → 확인 : 파일 삭제됨
- [ ] **F18** 파일 우클릭 → Show in Finder : Finder에서 파일 위치 열림
- [ ] **F19** 파일 우클릭 → Copy Path : 클립보드에 절대 경로 복사됨

#### 폴더 우클릭 컨텍스트 메뉴

- [ ] **F20** 폴더 우클릭 → Search in Folder : 해당 폴더로 범위 제한된 전역 검색 열림
- [ ] **F21** 폴더 우클릭 → New File : 해당 폴더 내에 파일 생성 모달 열림
- [ ] **F22** 폴더 우클릭 → New Folder : 해당 폴더 내에 폴더 생성 모달 열림

#### 드래그 앤 드롭

- [ ] **F23** 파일을 다른 폴더로 드래그 : 파일이 해당 폴더로 이동됨
- [ ] **F24** 폴더를 다른 폴더로 드래그 : 폴더와 내부 파일 전체 이동됨
- [ ] **F25** 폴더를 자기 자신 안으로 드래그 : 이동 불가, 원위치 복귀
- [ ] **F26** 현재 열린 파일이 이동됐을 때 : 저장 상태 및 편집기 내용 유지

#### 외부 파일 변경 감시

- [ ] **F27** 외부 편집기로 현재 열린 파일 수정 : 외부 변경 감지 알림 표시
- [ ] **F28** 외부에서 새 파일 생성 : 파일 트리 자동 업데이트
- [ ] **F29** 외부에서 파일 삭제 : 파일 트리에서 자동 제거

---

### 3.2 편집기 — WYSIWYG 기능

#### 기본 텍스트 입력 & 인라인 서식

- [ ] **E01** 텍스트 입력 : 실시간으로 화면에 표시됨
- [ ] **E02** 한국어 입력 (IME 조합) : 조합 중 중복 입력 없음
- [ ] **E03** 텍스트 선택 후 `Cmd+B` : **굵게** 적용, 툴바 버튼 활성화
- [ ] **E04** 텍스트 선택 후 `Cmd+I` : *기울임* 적용
- [ ] **E05** 텍스트 선택 후 `Cmd+Shift+X` : ~~취소선~~ 적용
- [ ] **E06** 텍스트 선택 후 `Cmd+E` : `인라인 코드` 적용
- [ ] **E07** `Cmd+Z` : 실행 취소 (Undo)
- [ ] **E08** `Cmd+Shift+Z` : 다시 실행 (Redo)

#### 제목 스타일

- [ ] **E09** `Cmd+Alt+1` : H1 제목으로 변환, 드롭다운 "Heading 1" 표시
- [ ] **E10** `Cmd+Alt+2` : H2 제목으로 변환
- [ ] **E11** `Cmd+Alt+3` ~ `Cmd+Alt+6` : H3~H6 제목으로 변환
- [ ] **E12** `Cmd+Alt+0` : 일반 텍스트(Paragraph)로 변환
- [ ] **E13** 드롭다운에서 Heading 선택 : 해당 레벨로 변환
- [ ] **E14** 제목 블록에 커서 위치 시 : 드롭다운이 현재 레벨 표시

#### 목록

- [ ] **E15** `Cmd+Shift+8` : 글머리 기호 목록 시작
- [ ] **E16** `Cmd+Shift+7` : 번호 매기기 목록 시작
- [ ] **E17** `Cmd+Shift+9` : 체크박스 목록 시작
- [ ] **E18** 목록 항목에서 `Tab` : 목록 들여쓰기
- [ ] **E19** 목록 항목에서 `Shift+Tab` : 목록 내어쓰기
- [ ] **E20** 체크박스 클릭 : 완료/미완료 토글
- [ ] **E21** 체크박스 상태 저장 : 파일 저장 후 재열기 시 상태 유지

#### 링크

- [ ] **E22** `Cmd+K` → URL 입력 → Insert : 링크 삽입됨
- [ ] **E23** URL 필드에 `#` 입력 : 현재 문서 제목 목록 드롭다운 표시
- [ ] **E24** 제목 드롭다운에서 항목 선택 : 앵커 링크 자동 완성
- [ ] **E25** `Cmd+클릭`으로 링크 열기 : 시스템 기본 브라우저에서 URL 열림
- [ ] **E26** 링크에 커서 위치 → `Cmd+K` : 링크 편집 모달 열림
- [ ] **E27** 링크 편집 모달 → Delete Link : 링크 마커 제거, 텍스트만 남음

#### 표 (Tables)

- [ ] **E28** 툴바 표 버튼 클릭 : 빈 표가 편집기에 삽입됨
- [ ] **E29** 표 셀에 내용 입력 : 셀에 텍스트 입력됨
- [ ] **E30** `Tab`으로 다음 셀 이동 : 커서가 다음 셀로 이동
- [ ] **E31** 표 우클릭 → Insert Row Below : 아래에 행 추가
- [ ] **E32** 표 우클릭 → Insert Row Above : 위에 행 추가
- [ ] **E33** 표 우클릭 → Delete Row : 현재 행 삭제
- [ ] **E34** 표 우클릭 → Insert Column Right : 오른쪽에 열 추가
- [ ] **E35** 표 우클릭 → Insert Column Left : 왼쪽에 열 추가
- [ ] **E36** 표 우클릭 → Delete Column : 현재 열 삭제
- [ ] **E37** 표 우클릭 → Delete Table : 표 전체 삭제

#### 코드 블록 & 인용구

- [ ] **E38** `Cmd+Shift+C` : 코드 블록 삽입
- [ ] **E39** 코드 블록 내 언어 지정 : 구문 강조 적용됨
- [ ] **E40** 코드 블록 내 `Tab` : 들여쓰기 (목록 이동 아님)
- [ ] **E41** `Cmd+Shift+B` : 인용구 블록 적용

#### 수평선

- [ ] **E42** 수평선 버튼 클릭 : 구분선 삽입됨

#### 우클릭 컨텍스트 메뉴

- [ ] **E43** 빈 영역 우클릭 : Paste, Insert Link 등 빈 영역 메뉴 표시
- [ ] **E44** 텍스트 선택 후 우클릭 : Cut, Copy, 서식 메뉴 표시
- [ ] **E45** 이미지 우클릭 : Edit Alt Text, Size, Replace 등 이미지 메뉴 표시
- [ ] **E46** 표 내부 우클릭 : 행/열 조작 메뉴 표시

---

### 3.3 편집기 — 마크다운 렌더링

> 기존 마크다운 문서를 열었을 때 올바르게 렌더링되는지 확인합니다.

#### 인라인 요소

- [ ] **M01** `**굵게**` → 굵은 텍스트로 표시
- [ ] **M02** `*기울임*` → 기울어진 텍스트로 표시
- [ ] **M03** `~~취소선~~` → 취소선 텍스트로 표시
- [ ] **M04** 백틱으로 감싼 `인라인 코드` → 코드 스타일 표시
- [ ] **M05** `[링크](https://example.com)` → 클릭 가능한 링크로 표시
- [ ] **M06** `[앵커](#heading)` → 앵커 링크로 표시
- [ ] **M07** `**굵게 *기울임* 조합**` → 중첩 서식 올바르게 표시

#### 블록 요소

- [ ] **M08** `# H1` ~ `###### H6` → 각 제목 레벨 올바르게 표시
- [ ] **M09** `- 항목` → 글머리 기호 목록으로 표시
- [ ] **M10** `1. 항목` → 번호 매기기 목록으로 표시
- [ ] **M11** `- [ ] 미완료` → 빈 체크박스로 표시
- [ ] **M12** `- [x] 완료` → 체크된 체크박스로 표시
- [ ] **M13** `> 인용구` → 들여쓰기된 인용 블록으로 표시
- [ ] **M14** `---` → 수평 구분선으로 표시
- [ ] **M15** 펜스 코드 블록 (언어 지정 포함) → 구문 강조와 함께 표시
- [ ] **M16** GFM 파이프 표 → 표 형태로 렌더링

#### 이미지

- [ ] **M17** `![alt](.assets/img.png)` → 이미지 올바르게 표시됨
- [ ] **M18** `![alt](data:image/...)` → base64 인라인 이미지 표시됨
- [ ] **M19** 이미지 크기 속성 (small/medium/large) → 지정된 크기로 표시

#### YAML Frontmatter

- [ ] **M20** frontmatter가 있는 파일 열기 → 편집기 본문에 frontmatter 표시 안 됨
- [ ] **M21** frontmatter 내용 → 메타데이터 패널의 title, tags 등에 반영됨

#### 코드 구문 강조 언어별 확인

- [ ] **M22** `javascript` 코드 블록 → 구문 강조 적용
- [ ] **M23** `python` 코드 블록 → 구문 강조 적용
- [ ] **M24** `typescript` 코드 블록 → 구문 강조 적용
- [ ] **M25** `bash` 코드 블록 → 구문 강조 적용
- [ ] **M26** 언어 지정 없는 코드 블록 → 강조 없이 표시

---

### 3.4 메뉴 & 단축키

#### File 메뉴

- [ ] **K01** File > New File (`Cmd+N`) : 파일 생성 모달 열림
- [ ] **K02** File > New Folder (`Cmd+Shift+N`) : 폴더 생성 모달 열림
- [ ] **K03** File > Save (`Cmd+S`) : 즉시 저장, saving → saved 상태 전환
- [ ] **K04** File > Export as PDF (`Cmd+Shift+P`) : PDF 저장 다이얼로그 열림
- [ ] **K05** File > Clean Up Unused Images : 미사용 이미지 정리 및 결과 알림
- [ ] **K06** File > Close File (`Cmd+W`) : 파일 닫힘, 편집기 빈 상태

#### Edit 메뉴

- [ ] **K07** Edit > Find (`Cmd+F`) : 찾기 바 열림
- [ ] **K08** Edit > Replace (`Cmd+Shift+F`) : 바꾸기 바 열림
- [ ] **K09** Edit > Search in Files (`Cmd+Shift+H`) : 전역 검색 패널 열림
- [ ] **K10** Edit > Undo (`Cmd+Z`) : 실행 취소
- [ ] **K11** Edit > Redo (`Cmd+Shift+Z`) : 다시 실행

#### View 메뉴

- [ ] **K12** View > Edit Mode (`Cmd+1`) : WYSIWYG 모드 전환
- [ ] **K13** View > Code Mode (`Cmd+2`) : 분할 편집 모드 전환
- [ ] **K14** View > Toggle Sidebar (`Cmd+.`) : 사이드바 표시/숨김 토글
- [ ] **K15** View > Dark Mode : 다크 모드 적용
- [ ] **K16** View > Light Mode : 라이트 모드 적용
- [ ] **K17** Zoom In (`Cmd+=`) : 화면 확대
- [ ] **K18** Zoom Out (`Cmd+-`) : 화면 축소
- [ ] **K19** Actual Size (`Cmd+0`) : 기본 배율 복원

#### Help 메뉴

- [ ] **K20** Help > About MarkNotes : About 모달 열림, 버전 표시
- [ ] **K21** Help > Keyboard Shortcuts (`Cmd+/`) : 단축키 목록 모달 열림

#### 액티비티 바 (사이드바 상단) 버튼

- [ ] **K22** 사이드바 토글 버튼 : 사이드바 표시/숨김
- [ ] **K23** 폴더 전체 펼치기 버튼 : 모든 폴더 펼침
- [ ] **K24** 폴더 전체 접기 버튼 : 모든 폴더 접힘
- [ ] **K25** 새 폴더 버튼 : 폴더 생성 모달 열림
- [ ] **K26** 새 파일 버튼 : 파일 생성 모달 열림
- [ ] **K27** 전역 검색 버튼 : 전역 검색 패널 열림/닫힘 토글
- [ ] **K28** PDF 내보내기 버튼 (파일 미열기 상태) : 버튼 비활성화
- [ ] **K29** 줌 인/아웃/리셋 버튼 : 화면 배율 변경
- [ ] **K30** 다크/라이트 모드 토글 버튼 : 테마 변경 및 유지

---

### 3.5 검색 기능

#### 문서 내 찾기 (Find)

- [ ] **S01** `Cmd+F` → 검색어 입력 : 일치 항목 강조, "X/Y" 카운터 표시
- [ ] **S02** `Enter` : 다음 일치 항목으로 이동
- [ ] **S03** `Shift+Enter` : 이전 일치 항목으로 이동
- [ ] **S04** 일치 없는 검색어 : "No results" 표시
- [ ] **S05** 대소문자 구분 토글 : 검색 결과 즉시 재필터링
- [ ] **S06** `Escape` : 찾기 바 닫힘, 강조 제거

#### 문서 내 바꾸기 (Replace)

- [ ] **S07** 찾기 바 ">" 버튼 : 바꾸기 행 표시됨
- [ ] **S08** Replace 입력 → `Enter` : 현재 항목만 치환
- [ ] **S09** Replace All : 모든 일치 항목 일괄 치환
- [ ] **S10** 치환 후 카운터 : 남은 일치 수 반영

#### 전역 검색 (Search in Files)

- [ ] **S11** `Cmd+Shift+H` → 검색어 입력 : 모든 파일에서 검색 결과 표시
- [ ] **S12** 검색 결과에서 파일명 클릭 : 해당 파일 열림
- [ ] **S13** 특정 결과 줄 클릭 : 해당 파일의 해당 위치로 커서 이동
- [ ] **S14** 검색 범위(폴더) 변경 : 선택한 폴더로 범위 제한됨
- [ ] **S15** Notes 모드 검색 : 파일 내용 기반 검색 결과 표시
- [ ] **S16** Tags 모드 검색 : frontmatter tags 기반 검색 결과 표시
- [ ] **S17** 결과 파일 그룹 클릭 : 해당 파일의 결과 목록 접기/펼치기
- [ ] **S18** 전역 검색 열기 : 사이드바 자동 숨김
- [ ] **S19** 전역 검색 닫기 : 사이드바 자동 복원
- [ ] **S20** 대소문자 구분 토글 : 검색 결과 즉시 재필터링

---

### 3.6 메타데이터 패널

- [ ] **P01** 파일 열기 시 패널 기본 상태 : 패널 표시 (접힘/펼침 확인)
- [ ] **P02** 패널 헤더 클릭 : 접힘/펼침 토글
- [ ] **P03** 새 파일의 자동 frontmatter : id, title, created, updated, tags, status 자동 생성
- [ ] **P04** title 필드 수정 : frontmatter의 title 업데이트됨
- [ ] **P05** status 드롭다운 변경 : frontmatter의 status 업데이트됨
- [ ] **P06** 태그 입력 후 `Enter` : 태그 칩으로 추가됨
- [ ] **P07** 한국어 태그 IME 입력 : 조합 중 중복 추가 안 됨
- [ ] **P08** 중복 태그 추가 시도 : 추가 안 됨
- [ ] **P09** 태그 X 버튼 : 해당 태그 제거됨
- [ ] **P10** 태그 입력 중 `Escape` : 입력 취소, 기존 태그 유지
- [ ] **P11** 사용자 정의 필드 추가(+) : 키-값 입력 후 frontmatter에 추가됨
- [ ] **P12** 사용자 정의 필드 삭제 : frontmatter에서 필드 제거됨
- [ ] **P13** 메타데이터 저장 확인 : 파일 재열기 시 모든 데이터 유지
- [ ] **P14** 패널 접힌 상태 : 태그 칩 미리보기가 헤더에 표시됨
- [ ] **P15** 파일 크기 표시 : 올바른 단위(B / KB / MB)로 표시

---

### 3.7 PDF 내보내기

- [ ] **X01** `Cmd+Shift+P` → 저장 위치 선택 : PDF 파일 생성됨
- [ ] **X02** PDF의 제목 렌더링 : H1~H6 계층 구조 유지
- [ ] **X03** PDF의 인라인 서식 : 굵게, 기울임, 취소선, 코드 표시
- [ ] **X04** PDF의 코드 블록 : 구문 강조 색상 포함
- [ ] **X05** PDF의 이미지 : 이미지 포함됨 (base64 변환)
- [ ] **X06** PDF의 체크박스 : 완료/미완료 상태 시각적으로 표시
- [ ] **X07** PDF의 표 : 표 형식 유지
- [ ] **X08** PDF의 링크 : 클릭 가능한 링크 (앵커 포함)
- [ ] **X09** 파일 미열기 상태에서 PDF 시도 : 버튼 비활성화
- [ ] **X10** PDF 내보내기 후 앱 상태 : 메모리 누수 없음, 창 정상 유지

---

### 3.8 이미지 관리

- [ ] **I01** 이미지 삽입 버튼 → 파일 선택 : 이미지 업로드 후 편집기에 삽입
- [ ] **I02** 10MB 초과 이미지 선택 : 에러 메시지 표시, 삽입 안 됨
- [ ] **I03** 지원하지 않는 형식(txt 등) 선택 : 에러 메시지 표시
- [ ] **I04** 이미지 우클릭 → Edit Alt Text : Alt 텍스트 수정 모달 열림
- [ ] **I05** 이미지 우클릭 → Replace Image : 새 이미지로 교체됨
- [ ] **I06** 이미지 우클릭 → Delete Image : 이미지 제거됨
- [ ] **I07** 이미지 우클릭 → Small : 이미지가 작은 크기로 표시
- [ ] **I08** 이미지 우클릭 → Medium : 이미지가 중간 크기로 표시
- [ ] **I09** 이미지 우클릭 → Large : 이미지가 큰 크기로 표시
- [ ] **I10** 이미지 우클릭 → Original : 원본 크기로 복원
- [ ] **I11** 이미지 우클릭 → Embed as Base64 : base64로 변환, 파일 크기 증가
- [ ] **I12** File > Clean Up Unused Images : 미참조 이미지 파일 삭제, 결과 수 표시

---

### 3.9 UI/UX & 외관

#### 다크/라이트 모드

- [ ] **U01** 다크 모드 전환 : 모든 UI 요소 다크 테마 적용 (편집기, 사이드바, 상태바 포함)
- [ ] **U02** 라이트 모드 전환 : 모든 UI 요소 라이트 테마 적용
- [ ] **U03** 앱 재시작 시 : 이전에 선택한 테마 유지

#### 상태 바 (Status Bar)

- [ ] **U04** 파일 열기 : 파일 경로 표시 (MarkNotes 루트 기준 상대경로)
- [ ] **U05** 타이핑 : 단어 수/문자 수 실시간 업데이트
- [ ] **U06** 커서 이동 : 현재 줄 / 전체 줄 수 업데이트

#### 레이아웃

- [ ] **U07** 사이드바 리사이즈 드래그 : 사이드바 너비 조절 가능
- [ ] **U08** 전체 화면 전환 : 레이아웃 정상 유지
- [ ] **U09** 창 최소 크기 : 최소 크기 이하로 축소되지 않음

#### 코드 모드 (분할 뷰)

- [ ] **U10** `Cmd+2` 전환 : 왼쪽 마크다운 소스, 오른쪽 미리보기로 분할됨
- [ ] **U11** 소스 편집 : 미리보기 실시간 업데이트
- [ ] **U12** 코드 모드에서 `Cmd+1` : WYSIWYG 모드로 전환, 내용 유지

#### 자동 저장

- [ ] **U13** 타이핑 멈춘 후 5초 : 자동 저장 (saving → saved 전환)
- [ ] **U14** 타이핑 중 5초 미경과 : 저장 안 됨 (unsaved 유지)
- [ ] **U15** `Cmd+S` : 즉시 저장 (5초 대기 없음)

---

*이 가이드는 기능 추가 및 변경 시 함께 업데이트해야 합니다.*
*수동 테스트는 주요 기능 개발 완료 시, PR 머지 전, 릴리즈 전에 전체 실행을 권장합니다.*
